"use strict";
(()=>{function E(n,e){let s=0,t;return function(...i){let l=Date.now();s&&l-s<=e&&clearTimeout(t),s=l,t=setTimeout(()=>n(...i),e)}}var _=".js-header",p=".js-burger",v=".js-header__overlay",M=".js-menu",a=".js-menu__item",m=".js-menu__list",L=".submenu",g="item_left",S="no-scroll",d="menu-active",r="active",f=()=>{let n=document.querySelector(_);n&&new u(n).init()},u=class{constructor(e){this.header=e,this.currentWidth=window.innerWidth,this.burgerEl=document.querySelector(p),this.menuEl=document.querySelector(M),this.menuItems=this.menuEl?.querySelectorAll(a),this.headerOverlay=document.querySelector(v),this.firstLevelMenuItems=this.menuEl?.querySelectorAll(`:scope > ${m} > ${a}`)}init(){this.initBurger(),this.initMenu(),this.updateOrientation(),this.setHeaderHeight(),this.initHeaderOverlay(),window.addEventListener("resize",E(()=>{this.handleResize()},100))}initHeaderOverlay(){this.headerOverlay?.addEventListener("click",()=>this.closeMenu())}handleResize(){this.setHeaderHeight(),this.currentWidth!==window.innerWidth&&(this.currentWidth=window.innerWidth,this.closeMenu(),this.updateOrientation())}initBurger(){this.burgerEl?.addEventListener("click",()=>this.toggleMenu())}initMenu(){this.menuItems?.forEach(e=>{e.querySelector(":scope > a")?.addEventListener("click",t=>{e.classList.contains(r)&&t.preventDefault()}),e.addEventListener("click",t=>{t.stopPropagation(),this.toggleMenuItem(e)})})}toggleMenuItem=e=>{e.classList.contains(r)||this.closeItemsInParentList(e),e.classList.toggle(r)};closeItemsInParentList=e=>{e.closest(m).querySelectorAll(`:scope > ${a}`).forEach(o=>o.classList.remove(r))};toggleMenu(){this.header.classList.contains(d)?this.closeMenu():this.openMenu()}closeMenu(){this.header?.classList.remove(d),document.body.classList.remove(S),this.menuItems?.forEach(e=>e.classList.remove(r))}openMenu(){window.scrollTo({top:0,left:0}),this.header?.classList.add(d),document.body.classList.add(S)}setHeaderHeight(){this.header.style.removeProperty("--header-height");let e=this.header.getBoundingClientRect().height;this.header.style.setProperty("--header-height",`${e}px`)}updateOrientation(){this.firstLevelMenuItems?.forEach(e=>{e.classList.remove(g);let s=e.querySelectorAll(`:scope > ${L}`),t=Array.from(s).reduce((o,i)=>{i.style.display="block";let l=i.getBoundingClientRect().width,y=i.querySelectorAll(L),c=0;return y.forEach(h=>{h.style.display="block",c=Math.max(c,h.getBoundingClientRect().width),h.removeAttribute("style")}),i.removeAttribute("style"),o+l+c},0);window.innerWidth-e.getBoundingClientRect().left-80<t&&e.classList.add(g)})}};f();})();
